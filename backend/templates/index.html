<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <title>SignalMasterPro - Admin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <header class="top">
    <h1>SignalMasterPro — Painel Admin (PT-BR)</h1>
    <div id="status" class="status on">Conectado</div>
  </header>
  <main>
    <section>
      <h2>Sinais em tempo real</h2>
      <table id="signals">
        <thead><tr><th>Par</th><th>Ação</th><th>Confiança</th><th>Horário</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>
  </main>
  <script>
    const ws = new WebSocket((location.protocol==='https:'?'wss://':'ws://')+location.host+'/ws?client_id=admin');
    ws.onmessage = (e) => {
      try {
        const msg = JSON.parse(e.data);
        if(msg.type==='signal'){ addSignal(msg.data); }
      } catch(err){}
    };
    function addSignal(s){
      const tbody = document.querySelector('#signals tbody');
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${s.pair}</td><td style="color:${s.action==='CALL'?'#22c55e':'#ef4444'}">${s.action}</td><td>${s.confidence}</td><td>${new Date(s.generated_at*1000).toLocaleTimeString()}</td>`;
      tbody.prepend(tr);
    }
  </script>
</body>
</html>
